<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>landen2rich Portal</title>
  <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/classic.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
      min-height: 100vh;
      color: white;
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      animation: slideDown 0.8s ease-out;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      background: linear-gradient(45deg, #ffffff, #cccccc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }

    .status-dot {
      width: 12px;
      height: 12px;
      background: #00ff00;
      border-radius: 50%;
      box-shadow: 0 0 10px #00ff00;
      animation: pulse 2s infinite;
    }

    /* UID Input Section */
    .uid-section {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      animation: slideUp 0.8s ease-out;
    }

    .uid-input {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 15px;
      padding: 15px 20px;
      color: white;
      font-size: 16px;
      width: 300px;
      margin: 20px 10px;
      backdrop-filter: blur(5px);
      transition: all 0.3s ease;
    }

    .uid-input:focus {
      outline: none;
      border-color: rgba(255,255,255,0.5);
      box-shadow: 0 0 20px rgba(255,255,255,0.2);
    }

    .connect-btn {
      background: linear-gradient(45deg, #333333, #555555);
      border: none;
      border-radius: 15px;
      padding: 15px 30px;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      margin: 10px;
    }

    .connect-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
      background: linear-gradient(45deg, #555555, #777777);
    }

    /* Config Form */
    .config-form {
      display: none;
      animation: fadeIn 0.6s ease-out;
    }

    .config-form.show {
      display: block;
    }

    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    fieldset {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    fieldset:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    }

    legend {
      font-weight: bold;
      font-size: 18px;
      padding: 0 15px;
      background: linear-gradient(45deg, #ffffff, #cccccc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    label {
      display: block;
      margin: 15px 0;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    label:hover {
      transform: translateX(5px);
    }

    .slider-label {
      display: flex;
      align-items: center;
      gap: 15px;
    }

input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  margin-right: 10px;
  cursor: pointer;
  border: 2px solid #ffffff;
  border-radius: 4px;
  background-color: #000000;
  transition: background-color 0.3s ease, border-color 0.3s ease;
  box-sizing: border-box;
  vertical-align: middle;
  position: relative;
}

input[type="checkbox"]:hover {
  border-color: #bbbbbb;
  background-color: #222222;
}

input[type="checkbox"]:checked {
  background-color: #fff;
  border-color: #fff;
}
input[type="checkbox"]:checked::after {
  display: none;
}


    input[type="range"] {
      flex: 1;
      height: 8px;
      background: linear-gradient(90deg, #222 0%, #444 100%);
      border-radius: 6px;
      outline: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3), 0 1.5px 0 #fff inset;
      transition: background 0.3s;
      border: 1.5px solid rgba(255,255,255,0.15);
    }

    input[type="range"]:hover {
      background: linear-gradient(90deg, #333 0%, #555 100%);
      border-color: rgba(255,255,255,0.3);
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #fff 60%, #ccc 100%);
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(0,0,0,0.4), 0 0 0 2px #fff inset;
      border: 2px solid #fff;
      cursor: pointer;
      transition: background 0.3s, border 0.3s;
    }

    input[type="range"]:hover::-webkit-slider-thumb {
      background: linear-gradient(135deg, #fff 80%, #eee 100%);
      border: 2.5px solid #fff;
    }

    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #fff 60%, #ccc 100%);
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(0,0,0,0.4), 0 0 0 2px #fff inset;
      border: 2px solid #fff;
      cursor: pointer;
      transition: background 0.3s, border 0.3s;
    }

    input[type="range"]:hover::-moz-range-thumb {
      background: linear-gradient(135deg, #fff 80%, #eee 100%);
      border: 2.5px solid #fff;
    }

    input[type="range"]::-ms-thumb {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #fff 60%, #ccc 100%);
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(0,0,0,0.4), 0 0 0 2px #fff inset;
      border: 2px solid #fff;
      cursor: pointer;
      transition: background 0.3s, border 0.3s;
    }

    input[type="range"]:hover::-ms-thumb {
      background: linear-gradient(135deg, #fff 80%, #eee 100%);
      border: 2.5px solid #fff;
    }

    input[type="range"]::-ms-fill-lower {
      background: #222;
      border-radius: 6px;
    }
    input[type="range"]::-ms-fill-upper {
      background: #444;
      border-radius: 6px;
    }

    input[type="range"]:focus {
      outline: none;
      box-shadow: 0 0 0 2px #fff, 0 2px 8px rgba(0,0,0,0.3);
      border-color: #fff;
      background: linear-gradient(90deg, #222 0%, #444 100%);
    }

    /* Remove default styles for Firefox */
    input[type="range"]::-moz-range-track {
      background: linear-gradient(90deg, #222 0%, #444 100%);
      border-radius: 6px;
      height: 8px;
      border: 1.5px solid rgba(255,255,255,0.15);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3), 0 1.5px 0 #fff inset;
    }
    input[type="range"]::-ms-tooltip {
      display: none;
    }

    input[type="number"] {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      padding: 8px 12px;
      color: white;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: rgba(255,255,255,0.5);
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
    }

    /* Custom Color Picker Styles */
    .color-picker-container {
      position: relative;
      display: inline-block;
    }

    .color-picker {
      width: 60px;
      height: 40px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      background: transparent;
      padding: 0;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .color-picker::-webkit-color-swatch-wrapper {
      padding: 0;
      border: none;
      border-radius: 15px;
      overflow: hidden;
    }

    .color-picker::-webkit-color-swatch {
      border: none;
      border-radius: 15px;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.3);
    }

    .color-picker:hover {
      transform: scale(1.1) rotate(2deg);
      box-shadow: 0 6px 25px rgba(0,0,0,0.4);
    }

    .color-picker:active {
      transform: scale(0.95);
    }

    .color-picker::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, rgba(255,255,255,0.3), transparent, rgba(255,255,255,0.3));
      border-radius: 17px;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .color-picker:hover::before {
      opacity: 1;
    }

    .color-label {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 15px 0;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .color-label:hover {
      transform: translateX(5px);
    }

    .color-label span {
      min-width: 140px;
    }

    .save-section {
      text-align: center;
      padding: 30px;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .save-btn {
      background: linear-gradient(45deg, #333333, #555555);
      border: none;
      border-radius: 15px;
      padding: 15px 40px;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      margin: 0 10px;
    }

    .save-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
      background: linear-gradient(45deg, #555555, #777777);
    }

    .status-message {
      margin-left: 20px;
      font-size: 16px;
      font-weight: bold;
    }

    /* Watermark */
    .watermark {
      position: fixed;
      bottom: 25px;
      right: 25px;
      font-size: 13px;
      font-weight: 500;
      color: rgba(255,255,255,0.7);
      background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%);
      padding: 12px 20px;
      border-radius: 25px;
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      z-index: 1000;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .watermark:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
      background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%);
      color: rgba(255,255,255,0.9);
    }

    .watermark::before {
      content: '';
      margin-right: 8px;
      font-size: 16px;
      animation: spark 2s ease-in-out infinite;
    }

    @keyframes spark {
      0%, 100% {
        opacity: 0.7;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        transform: scale(1.2);
      }
    }

    /* Animations */
    @keyframes slideDown {
      from {
        transform: translateY(-100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        transform: translateY(100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 10px #00ff00;
      }
      50% {
        box-shadow: 0 0 20px #00ff00, 0 0 30px #00ff00;
      }
      100% {
        box-shadow: 0 0 10px #00ff00;
      }
    }

    .slide-in {
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .current-uid {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px 20px;
      margin-bottom: 20px;
      text-align: center;
      font-size: 14px;
      color: rgba(255,255,255,0.8);
    }

    .uid-value {
      font-weight: bold;
      color: #00ff00;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .logo {
  font-size: 24px;
  font-weight: bold;
  color: white;
  display: flex;
  flex-direction: column;
}

.subtext {
  font-size: 12px;
  font-weight: normal;
  color: gray;
  margin-top: -2px;
}

/* Enhanced Pickr IMGUI-like styling */
.pickr .pcr-app {
  background: #000 !important;
  border-radius: 8px !important;
  border: 2px solid #232323 !important;
  box-shadow: 0 6px 32px #000a, 0 1.5px 0 #fff2 inset !important;
  min-width: 110px !important;
  max-width: 130px !important;
  padding: 4px 6px !important;
}
.pickr .pcr-selection {
  border-radius: 4px !important;
  border: 2px solid #232323 !important;
  margin-bottom: 6px !important;
  background: #000 !important;
}
/* Remove the Pickr sidebar (vertical color preview bar) */
.pickr .pcr-color-preview {
  display: none !important;
}
.pickr .pcr-interaction {
  display: none !important;
}
.pickr .pcr-color-preview {
  border-radius: 4px !important;
  border: 2px solid #333 !important;
  box-shadow: 0 2px 8px #0006 !important;
  width: 22px !important;
  height: 22px !important;
}
.pickr .pcr-slider, .pickr .pcr-picker {
  border-radius: 4px !important;
  border: 2px solid #232323 !important;
}
.pickr .pcr-slider {
  height: 8px !important;
}
.pickr .pcr-picker {
  width: 12px !important;
  height: 12px !important;
}
.pickr .pcr-selection {
  border-radius: 4px !important;
  border: 2px solid #232323 !important;
  margin-bottom: 6px !important;
  background: #000 !important;
}
/* Make the color spectrum background pure black */
.pickr .pcr-selection .pcr-color-rect {
  background: #000 !important;
  border-radius: 4px !important;
}
.pickr .pcr-result {
  color: #fff !important;
  background: #181818 !important;
  border-radius: 4px !important;
  border: 1.5px solid #232323 !important;
  font-family: 'Consolas', 'Menlo', 'Monaco', monospace !important;
  font-size: 13px !important;
  padding: 2px 6px !important;
}
.pickr .pcr-swatches {
  display: none !important;
}
.pickr .pcr-button {
  background: #232323 !important;
  color: #fff !important;
  border-radius: 4px !important;
  border: 1.5px solid #444 !important;
  font-weight: bold;
  font-size: 13px;
  box-shadow: 0 1px 4px #0004;
  transition: background 0.2s, border 0.2s;
}
.pickr .pcr-button:hover {
  background: #333 !important;
  border-color: #666 !important;
}
.pickr .pcr-picker {
  box-shadow: 0 0 0 2px #fff8, 0 1px 4px #0006 !important;
}
.pickr .pcr-selection .pcr-picker {
  border: 2px solid #fff !important;
}
.pickr .pcr-selection .pcr-slider {
  border: 2px solid #fff !important;
}
.pickr .pcr-selection .pcr-slider {
  height: 10px !important;
}
.pickr .pcr-selection .pcr-picker {
  width: 14px !important;
  height: 14px !important;
}
.pickr .pcr-selection {
  border-radius: 4px !important;
  border: 2px solid #232323 !important;
  margin-bottom: 8px !important;
}
.color-preview-box {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 2px solid #fff;
  box-shadow: 0 2px 8px #0006;
  background: #222;
  display: inline-block;
}
/* Remove the top color preview from Pickr popup */
.pickr .pcr-color-preview[data-type="PREVIEW"] {
  display: none !important;
}
/* Remove all Pickr popup color previews */
.pickr .pcr-color-preview {
  display: none !important;
}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="header-content">
      <div class="logo">
        landen2rich
        <span class="subtext">discord.gg/landen2rich</span>
      </div>
      <div class="status">
        <div class="status-dot"></div>
        <span>Server Online</span>
      </div>
    </div>
  </div>
<div class="uid-section" id="uid-section">
  <h2>UID Login</h2>
  <div style="margin-bottom: 10px;">
    <p style="margin: 0;">Get your UID from the Console</p>
    <small style="color: #aaa;">Example: landen2rich-46536600</small>
  </div>
  <input type="text" class="uid-input" id="uid-input" placeholder="Enter your UID...">
  <br>
  <button class="connect-btn" onclick="connectWithUID()">🔗 Connect</button>
</div>
    <div class="current-uid" id="current-uid" style="display: none;">
      Menu for UID: <span class="uid-value" id="uid-label"></span>
    </div>

    <form class="config-form" id="config-form">
      <div class="config-grid">
        <fieldset>
          <legend>Visuals</legend>
          <label><input type="checkbox" id="box"> Box ESP</label>
          <label><input type="checkbox" id="platform"> Platform ESP</label>
          <label><input type="checkbox" id="username"> Username ESP</label>
          <label><input type="checkbox" id="killcount"> Kill Count ESP</label>
          <label><input type="checkbox" id="weaponesp"> Weapon ESP</label>
          <label><input type="checkbox" id="skeleton"> Skeleton ESP</label>
        </fieldset>

        <fieldset>
          <legend>Aimbot</legend>
          <label><input type="checkbox" id="enable"> Enable Aimbot</label>
          <label><input type="checkbox" id="show_fov"> Show FOV Circle</label>
          <label class="slider-label">
            FOV:
            <input type="range" id="fov" min="0" max="360" step="1" value="160">
            <span id="fov-value">160</span>
          </label>
          <label class="slider-label">
            Smoothness:
            <input type="range" id="smoothness" min="0" max="20" step="0.1" value="9">
            <span id="smoothness-value">9</span>
          </label>
          <label><input type="checkbox" id="vischecktext"> Visible Check</label>
          <label>Aim Key (VK): 
          <button type="button" id="set-aim-key" style="background: linear-gradient(45deg, #333, #555); color: white; border-radius: 10px; border: none; padding: 8px 18px; font-size: 14px; font-weight: bold; cursor: pointer; margin-left: 5px;">Set Key</button>
          <input type="hidden" id="current_key" value="1">
          <span id="aim-key-label" style="margin-left: 10px; color: #00ff00; font-weight: bold;">1</span>
        </label>
          <label><input type="checkbox" id="fovarrows"> FOV Arrows</label>
        </fieldset>

        <fieldset>
          <legend>Triggerbot</legend>
          <label><input type="checkbox" id="triggerbot"> Enable Triggerbot</label>
          <label><input type="checkbox" id="triggerbot_enable"> Auto Trigger</label>
          <label class="slider-label">
            Delay (sec):
            <input type="range" id="delay" min="0" max="5" step="0.1" value="1.3">
            <span id="delay-value">1.3</span>
          </label>
          <label class="slider-label">
            Distance:
            <input type="range" id="distance" min="0" max="200" step="1" value="50">
            <span id="distance-value">50</span>
          </label>
          <label>Trigger Key (VK): 
            <button type="button" id="set-trigger-key" style="background: linear-gradient(45deg, #333, #555); color: white; border-radius: 10px; border: none; padding: 8px 18px; font-size: 14px; font-weight: bold; cursor: pointer; margin-left: 5px;">Set Key</button>
            <input type="hidden" id="key" value="2">
            <span id="trigger-key-label" style="margin-left: 10px; color: #00ff00; font-weight: bold;">2</span>
          </label>
        </fieldset>

        <fieldset>
          <legend>Radar</legend>
          <label><input type="checkbox" id="radar"> Enable Radar</label>
          <label class="slider-label">
            Position X:
            <input type="range" id="posx" min="0" max="100" step="0.1" value="35">
            <span id="posx-value">35.0</span>
          </label>
          <label class="slider-label">
            Position Y:
            <input type="range" id="posy" min="0" max="100" step="0.1" value="35">
            <span id="posy-value">35.0</span>
          </label>
        </fieldset>

        <fieldset>
          <legend>Colors</legend>
          <div class="color-label">
            <span>Name Color:</span>
            <div class="color-picker-container" style="display: flex; align-items: center; gap: 10px;">
              <div id="pickr-namecolor" class="color-picker"></div>
              <div id="preview-namecolor" class="color-preview-box"></div>
            </div>
          </div>
          <div class="color-label">
            <span>Skeleton Color:</span>
            <div class="color-picker-container" style="display: flex; align-items: center; gap: 10px;">
              <div id="pickr-skelcol" class="color-picker"></div>
              <div id="preview-skelcol" class="color-preview-box"></div>
            </div>
          </div>
          <div class="color-label">
            <span>Radar Visible:</span>
            <div class="color-picker-container" style="display: flex; align-items: center; gap: 10px;">
              <div id="pickr-radarvisible" class="color-picker"></div>
              <div id="preview-radarvisible" class="color-preview-box"></div>
            </div>
          </div>
          <div class="color-label">
            <span>Radar Invisible:</span>
            <div class="color-picker-container" style="display: flex; align-items: center; gap: 10px;">
              <div id="pickr-radarinvisible" class="color-picker"></div>
              <div id="preview-radarinvisible" class="color-preview-box"></div>
            </div>
          </div>
        </fieldset>
      </div>

      <div class="save-section">
        <button type="button" class="save-btn" onclick="saveConfig()">Save</button>
        <span class="status-message" id="status"></span>
      </div>
    </form>
  </div>

  <div class="watermark">made by landen2rich</div>

  <script>
    let currentUID = null;

    // Check if UID is in URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const urlUID = urlParams.get('uid');
    
    if (urlUID) {
      currentUID = urlUID;
      showConfigForm();
    }

    function connectWithUID() {
      const uidInput = document.getElementById('uid-input');
      const uid = uidInput.value.trim();
      
      if (!uid) {
        alert('Please enter a valid UID');
        return;
      }
      
      currentUID = uid;
      const newUrl = new URL(window.location);
      newUrl.searchParams.set('uid', uid);
      window.history.pushState({}, '', newUrl);
      
      showConfigForm();
    }

    function showConfigForm() {
      document.getElementById('uid-section').style.display = 'none';
      document.getElementById('current-uid').style.display = 'block';
      document.getElementById('config-form').classList.add('show');
      document.getElementById('uid-label').textContent = currentUID;
      loadConfiguration();

      // --- Aim Key (VK) Press-to-Set ---
      const setAimKeyBtn = document.getElementById('set-aim-key');
      const aimKeyLabel = document.getElementById('aim-key-label');
      const aimKeyInput = document.getElementById('current_key');
      let waitingForAimKey = false;

      // --- Trigger Key (VK) Press-to-Set ---
      const setTriggerKeyBtn = document.getElementById('set-trigger-key');
      const triggerKeyLabel = document.getElementById('trigger-key-label');
      const triggerKeyInput = document.getElementById('key');
      let waitingForTriggerKey = false;

      // Helper to get key name from event
      function getKeyName(e) {
        if (e.type === 'mousedown') {
          switch (e.button) {
            case 0: return 'Mouse Left';
            case 1: return 'Mouse Middle';
            case 2: return 'Mouse Right';
            case 3: return 'Mouse Back';
            case 4: return 'Mouse Forward';
            default: return 'Mouse Button ' + e.button;
          }
        }
        if (e.key && e.key.length === 1) return e.key.toUpperCase();
        if (e.key && e.key !== 'Unidentified') return e.key;
        // fallback for old browsers
        const keyMap = {
          8: 'Backspace', 9: 'Tab', 13: 'Enter', 16: 'Shift', 17: 'Ctrl', 18: 'Alt', 19: 'Pause', 20: 'CapsLock',
          27: 'Esc', 32: 'Space', 33: 'PageUp', 34: 'PageDown', 35: 'End', 36: 'Home', 37: 'Left', 38: 'Up', 39: 'Right', 40: 'Down',
          45: 'Insert', 46: 'Delete', 91: 'Meta', 93: 'Menu', 112: 'F1', 113: 'F2', 114: 'F3', 115: 'F4', 116: 'F5', 117: 'F6',
          118: 'F7', 119: 'F8', 120: 'F9', 121: 'F10', 122: 'F11', 123: 'F12', 144: 'NumLock', 145: 'ScrollLock',
          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`', 219: '[', 220: '\\', 221: ']', 222: "'"
        };
        return keyMap[e.keyCode || e.which] || (e.keyCode || e.which);
      }

      function setKeyFromEvent(e) {
        if (!waitingForAimKey && !waitingForTriggerKey) return;
        e.preventDefault();
        let code, label;
        if (e.type === 'mousedown') {
          switch (e.button) {
            case 0: code = 1; break; // Left
            case 1: code = 4; break; // Middle
            case 2: code = 2; break; // Right
            case 3: code = 5; break; // Back
            case 4: code = 6; break; // Forward
            default: code = 1 + e.button; break;
          }
          label = getKeyName(e);
        } else {
          code = e.keyCode || e.which;
          label = getKeyName(e);
        }
        if (waitingForAimKey) {
          aimKeyInput.value = code;
          aimKeyLabel.textContent = label;
          setAimKeyBtn.textContent = 'Set Key';
          setAimKeyBtn.disabled = false;
          waitingForAimKey = false;
        }
        if (waitingForTriggerKey) {
          triggerKeyInput.value = code;
          triggerKeyLabel.textContent = label;
          setTriggerKeyBtn.textContent = 'Set Key';
          setTriggerKeyBtn.disabled = false;
          waitingForTriggerKey = false;
        }
        window.removeEventListener('keydown', setKeyFromEvent, true);
        window.removeEventListener('mousedown', setKeyFromEvent, true);
        window.removeEventListener('contextmenu', preventMouse, true);
        window.removeEventListener('mouseup', preventMouse, true);
        window.removeEventListener('click', preventMouse, true);
      }

      function preventMouse(e) {
        if (waitingForAimKey || waitingForTriggerKey) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      }

      if (setAimKeyBtn) {
        setAimKeyBtn.onclick = function() {
          setAimKeyBtn.textContent = 'Press any key or mouse button...';
          setAimKeyBtn.disabled = true;
          waitingForAimKey = true;
          window.addEventListener('keydown', setKeyFromEvent, true);
          window.addEventListener('mousedown', setKeyFromEvent, true);
          window.addEventListener('contextmenu', preventMouse, true);
          window.addEventListener('mouseup', preventMouse, true);
          window.addEventListener('click', preventMouse, true);
        };
      }
      if (setTriggerKeyBtn) {
        setTriggerKeyBtn.onclick = function() {
          setTriggerKeyBtn.textContent = 'Press any key or mouse button...';
          setTriggerKeyBtn.disabled = true;
          waitingForTriggerKey = true;
          window.addEventListener('keydown', setKeyFromEvent, true);
          window.addEventListener('mousedown', setKeyFromEvent, true);
          window.addEventListener('contextmenu', preventMouse, true);
          window.addEventListener('mouseup', preventMouse, true);
          window.addEventListener('click', preventMouse, true);
        };
      }
    }

    const schema = {
      visuals: ['box','platform','username','killcount','weaponesp','skeleton'],
      aimbot: ['enable','show_fov','fov','smoothness','vischecktext','current_key','fovarrows'],
      triggerbot: ['triggerbot','triggerbot_enable','delay','distance','key'],
      exploits: ['wallbang'],
      radar: ['radar','posx','posy'],
      colors: [
        'namecolor_rgb',
        'skelcol_rgb',
        'rardarcolorvisible_rgb',
        'rardarcolorinvisible_rgb'
      ]
    };

    function hexToRgb(hex) {
      const bigint = parseInt(hex.slice(1), 16);
      return [(bigint >> 16) & 255, (bigint >> 8) & 255, bigint & 255];
    }

    function rgbToHex(r, g, b) {
      return "#" + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
    }

    function loadConfig(cfg) {
      for (let ns in schema) {
        schema[ns].forEach(field => {
          const el = document.getElementById(field);
          if (!el) return;
          if (ns === 'colors') {
            // handled by Pickr
          } else if (el.type === 'checkbox') {
            el.checked = !!cfg[ns][field];
          } else {
            el.value = cfg[ns][field];
          }
        });
      }
      setPickrColors(cfg);
    }

    function setupSlider(id) {
      const slider = document.getElementById(id);
      const display = document.getElementById(id + '-value');
      if (slider && display) {
        display.textContent = slider.value;
        slider.addEventListener('input', () => {
          display.textContent = slider.value;
        });
      }
    }

    ['fov', 'smoothness', 'delay', 'distance', 'posx', 'posy'].forEach(setupSlider);

    function loadConfiguration() {
      if (!currentUID) return;
      
      fetch('/config/' + currentUID)
        .then(r => r.json())
        .then(cfg => {
          loadConfig(cfg);
          document.querySelectorAll('fieldset').forEach((el, i) => {
            setTimeout(() => {
              el.classList.add('slide-in');
            }, i * 100);
          });
        })
        .catch(err => {
          console.error('Failed to load config:', err);
          document.getElementById('status').textContent = 'Failed to load configuration';
        });
    }

    function saveConfig() {
      if (!currentUID) return;
      
      const payload = {};
      for (let ns in schema) {
        if (!payload[ns]) payload[ns] = {};
        schema[ns].forEach(field => {
          const el = document.getElementById(field);
          if (!el) return;
          if (ns === 'colors') {
            // handled by Pickr
          } else if (el.type === 'checkbox') {
            payload[ns][field] = el.checked;
          } else {
            const val = parseFloat(el.value);
            payload[ns][field] = isNaN(val) ? el.value : val;
          }
        });
      }
      payload.colors = getPickrColors();

      fetch('/config/' + currentUID, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      })
      .then(resp => resp.json())
      .then(res => {
        document.getElementById('status').textContent = '✅Saved!';
        setTimeout(() => {
          document.getElementById('status').textContent = '';
        }, 3000);
      })
      .catch(err => {
        document.getElementById('status').textContent = '❌ Failed';
        console.error(err);
      });
    }
    document.getElementById('uid-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        connectWithUID();
      }
    });
      // --- Pickr Color Pickers ---
let pickrs = {};
function rgbArrayToHex(arr) {
  if (!arr) return '#ffffff';
  return (
    '#' +
    arr.slice(0, 3)
      .map(x => x.toString(16).padStart(2, '0'))
      .join('')
  );
}
function hexToRgbArr(hex) {
  const bigint = parseInt(hex.slice(1), 16);
  return [(bigint >> 16) & 255, (bigint >> 8) & 255, bigint & 255, 255];
}
function setupPickr(id, defaultColor) {
  return Pickr.create({
    el: id,
    theme: 'classic',
    default: defaultColor,
    components: {
      preview: true,
      opacity: false,
      hue: true,
      interaction: {
        hex: false,
        rgba: false,
        input: false,
        save: false
      }
    }
  });
}
function initPickrs() {
  pickrs.namecolor = setupPickr('#pickr-namecolor', '#ffffff');
  pickrs.skelcol = setupPickr('#pickr-skelcol', '#ffffff');
  pickrs.radarvisible = setupPickr('#pickr-radarvisible', '#00ff00');
  pickrs.radarinvisible = setupPickr('#pickr-radarinvisible', '#ff0000');

  // Update preview boxes on color change
  pickrs.namecolor.on('change', (color) => {
    document.getElementById('preview-namecolor').style.background = color ? color.toHEXA().toString() : '#fff';
  });
  pickrs.skelcol.on('change', (color) => {
    document.getElementById('preview-skelcol').style.background = color ? color.toHEXA().toString() : '#fff';
  });
  pickrs.radarvisible.on('change', (color) => {
    document.getElementById('preview-radarvisible').style.background = color ? color.toHEXA().toString() : '#fff';
  });
  pickrs.radarinvisible.on('change', (color) => {
    document.getElementById('preview-radarinvisible').style.background = color ? color.toHEXA().toString() : '#fff';
  });
}
function setPickrColors(cfg) {
  if (!cfg.colors) return;
  pickrs.namecolor.setColor(rgbArrayToHex(cfg.colors.namecolor));
  pickrs.skelcol.setColor(rgbArrayToHex(cfg.colors.skelcol));
  pickrs.radarvisible.setColor(rgbArrayToHex(cfg.colors.rardarcolorvisible));
  pickrs.radarinvisible.setColor(rgbArrayToHex(cfg.colors.rardarcolorinvisible));
  // Also update preview boxes
  document.getElementById('preview-namecolor').style.background = rgbArrayToHex(cfg.colors.namecolor);
  document.getElementById('preview-skelcol').style.background = rgbArrayToHex(cfg.colors.skelcol);
  document.getElementById('preview-radarvisible').style.background = rgbArrayToHex(cfg.colors.rardarcolorvisible);
  document.getElementById('preview-radarinvisible').style.background = rgbArrayToHex(cfg.colors.rardarcolorinvisible);
}
function getPickrColors() {
  return {
    namecolor: hexToRgbArr(pickrs.namecolor.getColor().toHEXA().toString()),
    skelcol: hexToRgbArr(pickrs.skelcol.getColor().toHEXA().toString()),
    rardarcolorvisible: hexToRgbArr(pickrs.radarvisible.getColor().toHEXA().toString()),
    rardarcolorinvisible: hexToRgbArr(pickrs.radarinvisible.getColor().toHEXA().toString())
  };
}
document.addEventListener('DOMContentLoaded', function() {
  initPickrs();
});
  </script>
</body>
</html>